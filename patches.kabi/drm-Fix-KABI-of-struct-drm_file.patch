From: Egbert Eich <eich@suse.de>
Date: Mon Nov 30 15:23:26 2015 +0100
Subject: drm: Fix KABI of 'struct drm_file'
Patch-mainline: never, KABI fix
References: bsc#956876, bsc#956801

The fix:
Author: Thomas Hellstr√∂m <thellstrom@vmware.com>
Date:   Mon Nov 30 12:14:35 2015 +0100

    drm: Allocate new master object when client becomes master

broke the KABI. This patch resolves the issue.

Signed-off-by: Egbert Eich <eich@suse.de>
Signed-off-by: Egbert Eich <eich@suse.com>
---
 include/drm/drmP.h | 2 ++
 1 file changed, 2 insertions(+)
diff --git a/include/drm/drmP.h b/include/drm/drmP.h
index 55937fc..0c08e83 100644
--- a/include/drm/drmP.h
+++ b/include/drm/drmP.h
@@ -431,7 +431,9 @@ struct drm_file {
 
 	int is_master; /* this file private is a master for a minor */
 	/* this client is allowed to gain master privileges for @master */
+#ifndef __GENKSYMS__
 	bool allowed_master;
+#endif
 	struct drm_master *master; /* master this node is currently associated with
 				      N.B. not always minor->master */
 
