From: =?UTF-8?q?Beno=C3=AEt=20Canet?= <benoit.canet@nodalink.com>
Date: Wed, 24 Jun 2015 23:18:39 +0200
Subject: [PATCH] libceph: Remove spurious kunmap() of the zero page
Mime-version: 1.0
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: 8bit
Git-commit: 6ba8edc0bcbdf337293e60123ddac8fc1c895a3c
Patch-mainline: v4.2
References: Fate#318586


ceph_tcp_sendpage already does the work of mapping/unmapping
the zero page if needed.

Signed-off-by: Beno√Æt Canet <benoit.canet@nodalink.com>
Reviewed-by: Alex Elder <elder@linaro.org>
Signed-off-by: Ilya Dryomov <idryomov@gmail.com>
Acked-by: NeilBrown <neilb@suse.com>

---
 net/ceph/messenger.c |    1 -
 1 file changed, 1 deletion(-)

--- a/net/ceph/messenger.c
+++ b/net/ceph/messenger.c
@@ -278,7 +278,6 @@ static void _ceph_msgr_exit(void)
 	ceph_msgr_slab_exit();
 
 	BUG_ON(zero_page == NULL);
-	kunmap(zero_page);
 	page_cache_release(zero_page);
 	zero_page = NULL;
 }
