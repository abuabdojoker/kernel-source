From: "Yan, Zheng" <zyan@redhat.com>
Date: Thu, 18 Sep 2014 16:11:12 +0800
Subject: [PATCH] ceph: fix llistxattr on symlink
Git-commit: 0abb43dcacb52145aa265f82c914375d59dfe2da
Patch-mainline: v3.18
References: Fate#318586


only regular file and directory have vxattrs.

Signed-off-by: Yan, Zheng <zyan@redhat.com>
Acked-by: NeilBrown <neilb@suse.com>

---
 fs/ceph/xattr.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/fs/ceph/xattr.c
+++ b/fs/ceph/xattr.c
@@ -280,8 +280,7 @@ static size_t ceph_vxattrs_name_size(str
 		return ceph_dir_vxattrs_name_size;
 	if (vxattrs == ceph_file_vxattrs)
 		return ceph_file_vxattrs_name_size;
-	BUG();
-
+	BUG_ON(vxattrs);
 	return 0;
 }
 
