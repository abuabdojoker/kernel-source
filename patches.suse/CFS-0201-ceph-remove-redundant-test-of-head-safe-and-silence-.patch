From: Brad Hubbard <bhubbard@redhat.com>
Date: Tue, 18 Aug 2015 10:18:53 +0800
Subject: [PATCH] ceph: remove redundant test of head->safe and silence static
 analysis warnings
Git-commit: 1550d34e5626a20a2e12c73bdc1e6e217a0ba897
Patch-mainline: v4.3
References: Fate#318586


Signed-off-by: Brad Hubbard <bhubbard@redhat.com>
Signed-off-by: Yan, Zheng <zyan@redhat.com>
Acked-by: NeilBrown <neilb@suse.com>

---
 fs/ceph/mds_client.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fs/ceph/mds_client.c
+++ b/fs/ceph/mds_client.c
@@ -2417,7 +2417,7 @@ static void handle_reply(struct ceph_mds
 		mutex_unlock(&mdsc->mutex);
 		goto out;
 	}
-	if (req->r_got_safe && !head->safe) {
+	if (req->r_got_safe) {
 		pr_warn("got unsafe after safe on %llu from mds%d\n",
 			   tid, mds);
 		mutex_unlock(&mdsc->mutex);
