From: Jianpeng Ma <jianpeng.ma@intel.com>
Date: Tue, 18 Aug 2015 10:23:50 +0800
Subject: [PATCH] ceph: remove the useless judgement
Git-commit: a43137f7b0f1467cf3005b6ff6574d978642d247
Patch-mainline: v4.3
References: Fate#318586


err != 0 is already handled. So skip this.

Signed-off-by: Jianpeng Ma <jianpeng.ma@intel.com>
Signed-off-by: Yan, Zheng <zyan@redhat.com>
Acked-by: NeilBrown <neilb@suse.com>

---
 fs/ceph/file.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fs/ceph/file.c
+++ b/fs/ceph/file.c
@@ -267,7 +267,7 @@ int ceph_atomic_open(struct inode *dir,
 	if (err)
 		goto out_err;
 
-	if (err == 0 && (flags & O_CREAT) && !req->r_reply_info.head->is_dentry)
+	if ((flags & O_CREAT) && !req->r_reply_info.head->is_dentry)
 		err = ceph_handle_notrace_create(dir, dentry);
 
 	if (d_unhashed(dentry)) {
